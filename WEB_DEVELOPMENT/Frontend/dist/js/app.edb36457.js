(function(t){function e(e){for(var r,n,i=e[0],c=e[1],u=e[2],l=0,d=[];l<i.length;l++)n=i[l],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);f&&f(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,n=1;n<a.length;n++){var i=a[n];0!==s[i]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var r={},n={app:0},s={app:0},o=[];function i(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-22edae0c":"5dd60d46","chunk-2d2086b7":"c301be2a","chunk-5bba9f90":"e0c3522c"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-5bba9f90":1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=new Promise((function(e,a){for(var r="css/"+({}[t]||t)+"."+{"chunk-22edae0c":"31d6cfe0","chunk-2d2086b7":"31d6cfe0","chunk-5bba9f90":"92647ec0"}[t]+".css",s=c.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var u=o[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===s))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===s)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||s,o=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete n[t],f.parentNode.removeChild(f),a(o)},f.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){n[t]=0})));var r=s[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise((function(e,a){r=s[t]=[e,a]}));e.push(r[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var a=s[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",d.name="ChunkLoadError",d.type=r,d.request=n,a[1](d)}s[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(a,r,function(e){return t[e]}.bind(null,r));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"wrapper"},[t.isLoggedIn?a("nav",{staticClass:"active",attrs:{id:"sidebar"}},[t._m(0),a("ul",{staticClass:"list-unstyled components"},[a("li",[a("router-link",{attrs:{to:"/home"}},[a("i",{staticClass:"fas fa-home"}),t._v(" Home ")])],1),a("li",[a("router-link",{attrs:{to:"/dashboard"}},[a("i",{staticClass:"fas fa-tachometer-alt"}),t._v(" Dashboard ")])],1),a("li",[a("router-link",{attrs:{to:"/"}},[a("i",{staticClass:"fas fa-dumpster"}),t._v(" Bins ")])],1),a("li",[a("router-link",{attrs:{to:"/"}},[a("i",{staticClass:"fas fa-dumpster"}),t._v(" Routing ")])],1),a("li",["Admin"==t.userlogged.type?a("router-link",{attrs:{to:"/globaladmin"}},[a("i",{staticClass:"fas fa-users-cog"}),t._v(" ADMIN ")]):t._e()],1)])]):t._e(),a("div",{staticClass:"container-fluid",attrs:{id:"content-wrapper"}},[t.isLoggedIn?a("nav",{staticClass:"navbar sticky-top navbar-expand-lg shadow"},[a("form",{staticClass:"d-none d-sm-inline-block form-inline  ml-md-3 my-2 my-md-0 mw-100 navbar-search"},[a("div",{staticClass:"input-group"},[a("input",{staticClass:"form-control bg-light",attrs:{type:"text",placeholder:"Search for...","aria-label":"Search"}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.logout}},[a("i",{staticClass:"fas fa-search fa-sm"})])])])]),a("ul",{staticClass:"navbar-nav ml-auto"},[t._m(1),a("div",{staticClass:"collapse navbar-collapse flex-grow-0",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"nav navbar-nav ml-auto"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("Usuario logueado: "),t.isLoggedIn?a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(t.userlogged.username))]):t._e()],1)])])])])]):t._e(),a("div",{attrs:{id:"content"}},[a("div",{staticClass:"container-fluid"},[a("router-view")],1)])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-header"},[a("h3",[t._v("Gomibako System")]),a("strong",[t._v("GS")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:" navbar-toggler btn btn-dark d-inline-block d-lg-none ml-auto",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("i",{staticClass:"fas fa-align-justify"})])}],o=(a("d3b7"),{data:function(){return{userlogged:JSON.parse(localStorage.getItem("userdata"))}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push("/login")}))}},created:function(){this.$http.interceptors.response.use(void 0,(function(t){return new Promise((function(e,a){throw 401===t.status&&t.config&&!t.config.__isRetryRequest&&this.$store.dispatch(logout),t}))}))}}),i=o,c=(a("034f"),a("2877")),u=Object(c["a"])(i,n,s,!1,null,null,null),l=u.exports,d=(a("45fc"),a("8c4f")),f=(a("bb51"),a("96cf"),a("1da1")),p=a("2f62"),m=a("bc3a"),h=a.n(m);r["default"].use(p["a"]);var g=new p["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",user:localStorage.getItem("userdata")||""},mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e,a){t.status="success",t.token=e,t.user=a},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token="",t.user=""}},actions:{login:function(t,e){var a=t.commit;return new Promise(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(r,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a("auth_request"),t.next=3,h()({url:"http://localhost:5000/gomibako/internalapi/1.0/login",data:e,method:"POST"}).then((function(t){var e=t.data.token,n=t.data.user[0];localStorage.setItem("userdata",JSON.stringify(n)),localStorage.setItem("token",e),h.a.defaults.headers.common["Authorization"]=e,a("auth_success",e,n),r(t)})).catch((function(t){a("auth_error"),localStorage.removeItem("userdata"),localStorage.removeItem("token"),n(t)}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},logout:function(t){var e=t.commit;return new Promise((function(t,a){e("logout"),localStorage.removeItem("token"),localStorage.removeItem("userdata"),delete h.a.defaults.headers.common["Authorization"],t()}))}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status},userLogged:function(t){return t.user}}});r["default"].use(d["a"]);var v=[{path:"*",redirect:"/login"},{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:function(){return a.e("chunk-2d2086b7").then(a.bind(null,"a55b"))}},{path:"/home",name:"Home",component:function(){return Promise.resolve().then(a.bind(null,"bb51"))},meta:{requiresAuth:!0}},{path:"/dashboard",name:"Dashboard",component:function(){return a.e("chunk-5bba9f90").then(a.bind(null,"7277"))},meta:{requiresAuth:!0}},{path:"/globaladmin",name:"AdminPanel",component:function(){return a.e("chunk-22edae0c").then(a.bind(null,"d243"))},meta:{requiresAuth:!0}}],b=new d["a"]({mode:"history",base:"/",routes:v});b.beforeEach((function(t,e,a){if(t.matched.some((function(t){return t.meta.requiresAuth}))){if(g.getters.isLoggedIn)return void a();a("/login")}else a()}));var C=b,y=a("5f5b");r["default"].use(y["a"]),r["default"].config.productionTip=!1,r["default"].prototype.$http=h.a;var w=localStorage.getItem("token");w&&(r["default"].prototype.$http.defaults.headers.common["Authorization"]=w),new r["default"]({router:C,store:g,render:function(t){return t(l)}}).$mount("#app")},"5ced":function(t,e,a){},"85ec":function(t,e,a){},bb51:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("b-row",{staticClass:"mb-4"},[a("b-col",{attrs:{cols:"12",md:"3"}},[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("div",{staticClass:"card  shadow",staticStyle:{height:"6rem",width:"80%"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row no-gutters align-items-center"},[a("div",{staticClass:"col mr-1"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"text-xs font-weight-bold text-success text-uppercase mb-1"},[t._v("Activos")])]),a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"h5 mb-0 font-weight-bold text-gray-800"},[t._v("DATO")])])]),a("div",{staticClass:"col-auto"},[a("i",{staticClass:"fas fa-trash fa-2x text-success"})])])])])])],1),a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("div",{staticClass:"card  shadow",staticStyle:{height:"6rem",width:"80%"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row no-gutters align-items-center"},[a("div",{staticClass:"col mr-1"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"text-xs font-weight-bold text-success text-uppercase mb-1"},[t._v("Activos")])]),a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"h5 mb-0 font-weight-bold text-gray-800"},[t._v("DATO")])])]),a("div",{staticClass:"col-auto"},[a("i",{staticClass:"fas fa-trash fa-2x text-success"})])])])])])],1),a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("div",{staticClass:"card  shadow",staticStyle:{height:"6rem",width:"80%"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row no-gutters align-items-center"},[a("div",{staticClass:"col mr-1"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"text-xs font-weight-bold text-success text-uppercase mb-1"},[t._v("Activos")])]),a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"h5 mb-0 font-weight-bold text-gray-800"},[t._v("DATO")])])]),a("div",{staticClass:"col-auto"},[a("i",{staticClass:"fas fa-trash fa-2x text-success"})])])])])])],1)],1),a("b-col",{attrs:{cols:"12",md:"9"}},[a("div",{staticClass:"card shadow"},[a("div",{staticClass:"card-body"},[a("div",{attrs:{id:"map"}})])])])],1)],1)},n=[],s=(a("a4d3"),a("e01a"),a("4160"),a("159b"),a("96cf"),a("1da1")),o=a("e192"),i=a.n(o),c=a("3d20"),u=a.n(c),l=a("bc3a"),d=a.n(l),f={name:"Home",data:function(){return{accessToken:"pk.eyJ1IjoiYW50aG9ueXNha2EiLCJhIjoiY2tnbjBrZWR4MGkwNDJ0cGczb2UxNTE4YiJ9.WsEmhirejFVApuNz9Ivtlw",userlogged:JSON.parse(localStorage.getItem("userdata"))}},mounted:function(){var t=this;i.a.accessToken=this.accessToken;var e=new i.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-70.703692,19.415888],zoom:12}),a={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[-70.702859,19.416531]},properties:{title:"Mapbox",description:"Washington, D.C."}},{type:"Feature",geometry:{type:"Point",coordinates:[-70.700939,19.419314]},properties:{title:"Mapbox",description:"San Francisco, California"}}]};a.features.forEach((function(t){var a=document.createElement("div");a.className="marker",new i.a.Marker(a).setLngLat(t.geometry.coordinates).setPopup(new i.a.Popup({offset:25}).setHTML("<h3>"+t.properties.title+"</h3><p>"+t.properties.description+"</p>")).addTo(e)})),1==this.userlogged.default_credentials&&u.a.mixin({confirmButtonText:"Next &rarr;",progressSteps:["1","2","3","4"],allowOutsideClick:!1}).queue([{title:"Hey, hemos detectado que aun no has cambiado tus credenciales por defecto, por favor continuar para cambiarlas (Es muy recomendado).",showCancelButton:!0},{input:"text",title:"Cambiar el nombre de usuario por defecto",text:"Por favor introducir un nuevo nombre de usuario",showCancelButton:!1,inputValidator:function(t){if(!t)return"You need to write something!"}},{input:"password",title:"Cambiar contrasena por defecto",text:"Por favor introducir una nueva contrasena",showCancelButton:!1,inputValidator:function(t){if(!t)return"You need to write something!"}}]).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.value){e.next=11;break}return e.next=3,d.a.put("http://localhost:5000/gomibako/internalapi/1.0/changecredentials",{id:t.userlogged.id,newusername:a.value[1],newpassword:a.value[2]});case 3:return r=e.sent,n=a.value[1],s=a.value[2],e.next=8,d.a.post("http://localhost:5000/gomibako/internalapi/1.0/login",{username:n,password:s});case 8:o=e.sent,localStorage.setItem("userdata",JSON.stringify(o.data.user[0])),t.userlogged=JSON.parse(localStorage.getItem("userdata")),console.log(r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},p=f,m=(a("cccb"),a("2877")),h=Object(m["a"])(p,r,n,!1,null,null,null);e["default"]=h.exports},cccb:function(t,e,a){"use strict";a("5ced")}});
//# sourceMappingURL=app.edb36457.js.map